<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrekWanders - Experience The Magic Of Travel!</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2563eb;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #2563eb;
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: #2563eb;
            border: 2px solid #2563eb;
        }

        .btn-outline:hover {
            background: #2563eb;
            color: white;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="a" cx="50%" cy="50%" r="50%"><stop offset="0%" stop-color="%23ffffff" stop-opacity="0.1"/><stop offset="100%" stop-color="%23ffffff" stop-opacity="0"/></radialGradient></defs><circle cx="200" cy="200" r="100" fill="url(%23a)"/><circle cx="800" cy="300" r="150" fill="url(%23a)"/><circle cx="400" cy="700" r="120" fill="url(%23a)"/></svg>') no-repeat center center;
            background-size: cover;
        }

        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .hero-text h1 {
            font-size: 3.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .hero-text p {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2rem;
        }

        .hero-image {
            position: relative;
        }

        .hero-image img {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        /* Sections */
        .section {
            padding: 5rem 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 1rem;
        }

        .section-title p {
            font-size: 1.1rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Trip Cards */
        .trips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .trip-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .trip-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        }

        .trip-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .trip-card-content {
            padding: 1.5rem;
        }

        .trip-card h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .trip-location {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .trip-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .stars {
            color: #ffd700;
        }

        .trip-price {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2563eb;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            position: relative;
            height: 300px;
            overflow: hidden;
            border-radius: 20px 20px 0 0;
        }

        .modal-header img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-body h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 1rem;
        }

        .modal-body p {
            color: #666;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .video-container {
            position: relative;
            width: 100%;
            height: 300px;
            margin: 1.5rem 0;
            border-radius: 15px;
            overflow: hidden;
        }

        .video-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Admin Panel */
        .admin-panel {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .admin-form {
            display: grid;
            gap: 1rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            padding: 0.8rem;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #2563eb;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* Auth Forms */
        .auth-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .auth-form {
            background: white;
            margin: 10% auto;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            position: relative;
        }

        .auth-form h2 {
            text-align: center;
            margin-bottom: 2rem;
            color: #333;
        }

        .user-info {
            display: none;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #2563eb;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .hero-text h1 {
                font-size: 2.5rem;
            }

            .nav-links {
                display: none;
            }

            .trips-grid {
                grid-template-columns: 1fr;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2563eb;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .tab-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        .tab-button {
            padding: 0.8rem 1.5rem;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .tab-button.active {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .admin-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 0.5rem;
        }

        .admin-btn {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .admin-btn:hover {
            background: rgba(0, 0, 0, 0.9);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="container">
            <div class="logo">
                <i class="fas fa-mountain"></i> TrekWanders
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#destinations">Destinations</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="auth-buttons">
                <div class="user-info" id="userInfo">
                    <div class="user-avatar" id="userAvatar"></div>
                    <span id="userName"></span>
                    <button class="btn btn-outline" onclick="logout()">Logout</button>
                </div>
                <div id="authButtons">
                    <button class="btn btn-outline" onclick="openAuthModal('login')">Login</button>
                    <button class="btn btn-primary" onclick="openAuthModal('signup')">Sign Up</button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>Experience The Magic Of Travel!</h1>
                    <p>Discover breathtaking destinations and create unforgettable memories with TrekWanders. Your adventure begins here.</p>
                    <button class="btn btn-primary" onclick="document.getElementById('destinations').scrollIntoView()">
                        <i class="fas fa-plane"></i> Book A Trip Now
                    </button>
                </div>
                <div class="hero-image">
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 600'><rect fill='%23e0f2fe' width='800' height='600'/><circle fill='%23ffffff' cx='400' cy='150' r='80'/><path fill='%234fc3f7' d='M0 400 Q200 350 400 400 T800 400 L800 600 L0 600 Z'/><rect fill='%23ffffff' x='300' y='200' width='200' height='150' rx='10'/><path fill='%23757575' d='M350 250 L450 250 L400 200 Z'/><circle fill='%23ff5722' cx='320' cy='270' r='8'/><circle fill='%23ff5722' cx='380' cy='270' r='8'/><circle fill='%23ff5722' cx='440' cy='270' r='8'/></svg>" alt="Travel Airplane">
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Panel -->
    <div class="admin-panel container" id="adminPanel">
        <h2><i class="fas fa-cog"></i> Admin Panel</h2>
        <form class="admin-form" id="adminForm">
            <div class="form-group">
                <label for="tripTitle">Trip Title</label>
                <input type="text" id="tripTitle" required>
            </div>
            <div class="form-group">
                <label for="tripLocation">Location</label>
                <input type="text" id="tripLocation" required>
            </div>
            <div class="form-group">
                <label for="tripImage">Image URL</label>
                <input type="url" id="tripImage" required>
            </div>
            <div class="form-group">
                <label for="tripPrice">Price</label>
                <input type="text" id="tripPrice" required>
            </div>
            <div class="form-group">
                <label for="tripRating">Rating (1-5)</label>
                <input type="number" id="tripRating" min="1" max="5" step="0.1" required>
            </div>
            <div class="form-group">
                <label for="tripDescription">Description</label>
                <textarea id="tripDescription" required></textarea>
            </div>
            <div class="form-group">
                <label for="tripVideo">Video URL (YouTube)</label>
                <input type="url" id="tripVideo">
            </div>
            <div class="form-group">
                <label for="tripCategory">Category</label>
                <select id="tripCategory" required>
                    <option value="trending">Trending</option>
                    <option value="upcoming">Upcoming</option>
                    <option value="past">Past</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">
                <span id="adminSubmitText">Add Trip</span>
                <div class="loading" id="adminLoading" style="display: none;"></div>
            </button>
        </form>
    </div>

    <!-- Destinations Section -->
    <section class="section" id="destinations">
        <div class="container">
            <div class="section-title">
                <h2>Popular Destinations</h2>
                <p>Unleash Your Wanderlust With TrekWanders</p>
            </div>

            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('trending')">Trending</button>
                <button class="tab-button" onclick="showTab('upcoming')">Upcoming</button>
                <button class="tab-button" onclick="showTab('past')">Past Adventures</button>
            </div>

            <div class="tab-content active" id="trending">
                <div class="trips-grid" id="trendingTrips">
                    <!-- Trending trips will be loaded here -->
                </div>
            </div>

            <div class="tab-content" id="upcoming">
                <div class="trips-grid" id="upcomingTrips">
                    <!-- Upcoming trips will be loaded here -->
                </div>
            </div>

            <div class="tab-content" id="past">
                <div class="trips-grid" id="pastTrips">
                    <!-- Past trips will be loaded here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Trip Details Modal -->
    <div id="tripModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <img id="modalImage" src="" alt="">
                <span class="close">&times;</span>
                <div class="admin-actions" id="modalAdminActions" style="display: none;">
                    <button class="admin-btn" onclick="editTrip()"><i class="fas fa-edit"></i></button>
                    <button class="admin-btn" onclick="deleteTrip()"><i class="fas fa-trash"></i></button>
                </div>
            </div>
            <div class="modal-body">
                <h2 id="modalTitle"></h2>
                <div class="trip-location">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="modalLocation"></span>
                </div>
                <div class="trip-rating">
                    <div class="stars" id="modalStars"></div>
                    <span id="modalRating"></span>
                </div>
                <div class="trip-price" id="modalPrice"></div>
                <p id="modalDescription"></p>
                <div class="video-container" id="modalVideoContainer" style="display: none;">
                    <iframe id="modalVideo" src="" allowfullscreen></iframe>
                </div>
                <button class="btn btn-primary" style="width: 100%; margin-top: 2rem;">
                    <i class="fas fa-ticket-alt"></i> Book Now
                </button>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-form">
            <span class="close" onclick="closeAuthModal()">&times;</span>
            <h2 id="authTitle">Login</h2>
            <form id="authFormElement">
                <div class="form-group">
                    <label for="authEmail">Email</label>
                    <input type="email" id="authEmail" required>
                </div>
                <div class="form-group">
                    <label for="authPassword">Password</label>
                    <input type="password" id="authPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <span id="authSubmitText">Login</span>
                    <div class="loading" id="authLoading" style="display: none;"></div>
                </button>
            </form>
            <p style="text-align: center; margin-top: 1rem;">
                <span id="authSwitchText">Don't have an account?</span>
                <a href="#" id="authSwitchLink" onclick="switchAuthMode()">Sign up</a>
            </p>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAL5e-5eQfgf1nI6hWTnhwLFgK0Cp89aa0",
            authDomain: "aviator-pr01.firebaseapp.com",
            databaseURL: "https://aviator-pr01-default-rtdb.firebaseio.com",
            projectId: "aviator-pr01",
            storageBucket: "aviator-pr01.firebasestorage.app",
            messagingSenderId: "290788041297",
            appId: "1:290788041297:web:168f99d1532997fb778e70",
            measurementId: "G-ENCBTT4BL8"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        let currentUser = null;
        let isAdmin = false;
        let currentTripId = null;
        let authMode = 'login';

        // Admin emails - you can modify this list
        const adminEmails = ['admin@trekwanders.com', 'owner@trekwanders.com'];

        // Sample trips data for initial load
        const sampleTrips = [
            {
                id: 'sample1',
                title: 'Tropical Paradise Getaway',
                location: 'Maldives',
                image: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600"><rect fill="%2300bcd4" width="800" height="600"/><circle fill="%23ffffff" cx="400" cy="150" r="60"/><ellipse fill="%23ffeb3b" cx="400" cy="500" rx="300" ry="100"/><path fill="%2366bb6a" d="M200 450 Q250 400 300 450 T400 450"/><path fill="%2366bb6a" d="M400 450 Q450 400 500 450 T600 450"/><rect fill="%238d6e63" x="250" y="350" width="20" height="100"/><rect fill="%238d6e63" x="530" y="380" width="15" height="70"/></svg>',
                price: '$2,999',
                rating: 4.8,
                description: 'Experience the ultimate tropical paradise with crystal clear waters, white sandy beaches, and luxurious overwater bungalows. Perfect for honeymoons and romantic getaways.',
                videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ',
                category: 'trending'
            },
            {
                id: 'sample2',
                title: 'Mountain Adventure Trek',
                location: 'Nepal Himalayas',
                image: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600"><rect fill="%2387ceeb" width="800" height="600"/><polygon fill="%23ffffff" points="200,300 400,100 600,300 400,200"/><polygon fill="%23d3d3d3" points="400,100 600,300 400,200"/><polygon fill="%234682b4" points="100,400 300,200 500,400 300,300"/><polygon fill="%23696969" points="300,200 500,400 300,300"/><polygon fill="%2332cd32" points="0,500 800,500 800,600 0,600"/><circle fill="%23ffff00" cx="150" cy="150" r="40"/></svg>',
                price: '$1,799',
                rating: 4.9,
                description: 'Embark on an unforgettable journey through the majestic Himalayas. Experience breathtaking mountain views, local culture, and the thrill of high-altitude trekking.',
                videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ',
                category: 'trending'
            },
            {
                id: 'sample3',
                title: 'Safari Wildlife Experience',
                location: 'Kenya, Africa',
                image: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600"><rect fill="%23daa520" width="800" height="600"/><circle fill="%23ff4500" cx="700" cy="100" r="50"/><rect fill="%23228b22" x="0" y="400" width="800" height="200"/><ellipse fill="%23654321" cx="200" cy="350" rx="80" ry="30"/><ellipse fill="%23654321" cx="600" cy="380" rx="100" ry="40"/><circle fill="%23000000" cx="180" cy="320" r="15"/><circle fill="%23000000" cx="220" cy="320" r="15"/><path fill="%23000000" d="M200 300 L200 280 M190 290 L210 290"/></svg>',
                price: '$3,299',
                rating: 4.7,
                description: 'Witness the incredible wildlife of Africa on this amazing safari adventure. See lions, elephants, giraffes, and more in their natural habitat.',
                videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ',
                category: 'upcoming'
            }
        ];

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Load sample trips initially
            loadSampleTrips();
            
            // Set up event listeners
            setupEventListeners();
            
            // Check authentication state
            auth.onAuthStateChanged(user => {
                if (user) {
                    currentUser = user;
                    isAdmin = adminEmails.includes(user.email);
                    updateUIForUser(user);
                    loadTripsFromFirestore();
                } else {
                    currentUser = null;
                    isAdmin = false;
                    updateUIForGuest();
                }
            });
        });

        function loadSampleTrips() {
            const trendingContainer = document.getElementById('trendingTrips');
            const upcomingContainer = document.getElementById('upcomingTrips');
            
            sampleTrips.forEach(trip => {
                const tripCard = createTripCard(trip);
                if (trip.category === 'trending') {
                    trendingContainer.appendChild(tripCard);
                } else if (trip.category === 'upcoming') {
                    upcomingContainer.appendChild(tripCard);
                }
            });
        }

        function setupEventListeners() {
            // Auth form submission
            document.getElementById('authFormElement').addEventListener('submit', handleAuth);
            
            // Admin form submission
            document.getElementById('adminForm').addEventListener('submit', handleAdminSubmit);
            
            // Modal close events
            document.querySelectorAll('.close').forEach(closeBtn => {
                closeBtn.addEventListener('click', function() {
                    this.closest('.modal, .auth-modal').style.display = 'none';
                });
            });
            
            // Click outside modal to close
            window.addEventListener('click', function(event) {
                if (event.target.classList.contains('modal') || event.target.classList.contains('auth-modal')) {
                    event.target.style.display = 'none';
                }
            });
        }

        function updateUIForUser(user) {
            document.getElementById('authButtons').style.display = 'none';
            document.getElementById('userInfo').style.display = 'flex';
            document.getElementById('userName').textContent = user.displayName || user.email.split('@')[0];
            document.getElementById('userAvatar').textContent = (user.displayName || user.email)[0].toUpperCase();
            
            if (isAdmin) {
                document.getElementById('adminPanel').style.display = 'block';
                document.querySelectorAll('.admin-actions').forEach(el => el.style.display = 'flex');
            }
        }

        function updateUIForGuest() {
            document.getElementById('authButtons').style.display = 'flex';
            document.getElementById('userInfo').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'none';
            document.querySelectorAll('.admin-actions').forEach(el => el.style.display = 'none');
        }

        function openAuthModal(mode) {
            authMode = mode;
            document.getElementById('authModal').style.display = 'flex';
            
            if (mode === 'login') {
                document.getElementById('authTitle').textContent = 'Login';
                document.getElementById('authSubmitText').textContent = 'Login';
                document.getElementById('authSwitchText').textContent = "Don't have an account?";
                document.getElementById('authSwitchLink').textContent = 'Sign up';
            } else {
                document.getElementById('authTitle').textContent = 'Sign Up';
                document.getElementById('authSubmitText').textContent = 'Sign Up';
                document.getElementById('authSwitchText').textContent = 'Already have an account?';
                document.getElementById('authSwitchLink').textContent = 'Login';
            }
        }

        function closeAuthModal() {
            document.getElementById('authModal').style.display = 'none';
            document.getElementById('authFormElement').reset();
        }

        function switchAuthMode() {
            authMode = authMode === 'login' ? 'signup' : 'login';
            openAuthModal(authMode);
        }

        async function handleAuth(e) {
            e.preventDefault();
            
            const email = document.getElementById('authEmail').value;
            const password = document.getElementById('authPassword').value;
            
            document.getElementById('authLoading').style.display = 'inline-block';
            document.getElementById('authSubmitText').style.display = 'none';
            
            try {
                if (authMode === 'login') {
                    await auth.signInWithEmailAndPassword(email, password);
                } else {
                    await auth.createUserWithEmailAndPassword(email, password);
                }
                closeAuthModal();
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                document.getElementById('authLoading').style.display = 'none';
                document.getElementById('authSubmitText').style.display = 'inline';
            }
        }

        function logout() {
            auth.signOut();
        }

        function showTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
        }

        function createTripCard(trip) {
            const card = document.createElement('div');
            card.className = 'trip-card';
            card.onclick = () => openTripModal(trip);
            
            const stars = '★'.repeat(Math.floor(trip.rating)) + '☆'.repeat(5 - Math.floor(trip.rating));
            
            card.innerHTML = `
                ${isAdmin ? `
                <div class="admin-actions">
                    <button class="admin-btn" onclick="event.stopPropagation(); editTrip('${trip.id}')"><i class="fas fa-edit"></i></button>
                    <button class="admin-btn" onclick="event.stopPropagation(); deleteTrip('${trip.id}')"><i class="fas fa-trash"></i></button>
                </div>
                ` : ''}
                <img src="${trip.image}" alt="${trip.title}">
                <div class="trip-card-content">
                    <h3>${trip.title}</h3>
                    <div class="trip-location">
                        <i class="fas fa-map-marker-alt"></i>
                        ${trip.location}
                    </div>
                    <div class="trip-rating">
                        <div class="stars">${stars}</div>
                        <span>${trip.rating}</span>
                    </div>
                    <div class="trip-price">${trip.price}</div>
                </div>
            `;
            
            return card;
        }

        function openTripModal(trip) {
            currentTripId = trip.id;
            
            document.getElementById('modalImage').src = trip.image;
            document.getElementById('modalTitle').textContent = trip.title;
            document.getElementById('modalLocation').textContent = trip.location;
            document.getElementById('modalRating').textContent = trip.rating;
            document.getElementById('modalPrice').textContent = trip.price;
            document.getElementById('modalDescription').textContent = trip.description;
            
            const stars = '★'.repeat(Math.floor(trip.rating)) + '☆'.repeat(5 - Math.floor(trip.rating));
            document.getElementById('modalStars').textContent = stars;
            
            if (trip.videoUrl) {
                document.getElementById('modalVideoContainer').style.display = 'block';
                document.getElementById('modalVideo').src = trip.videoUrl;
            } else {
                document.getElementById('modalVideoContainer').style.display = 'none';
            }
            
            if (isAdmin) {
                document.getElementById('modalAdminActions').style.display = 'flex';
            }
            
            document.getElementById('tripModal').style.display = 'flex';
        }

        async function handleAdminSubmit(e) {
            e.preventDefault();
            
            if (!isAdmin) {
                alert('Access denied. Admin privileges required.');
                return;
            }
            
            const tripData = {
                title: document.getElementById('tripTitle').value,
                location: document.getElementById('tripLocation').value,
                image: document.getElementById('tripImage').value,
                price: document.getElementById('tripPrice').value,
                rating: parseFloat(document.getElementById('tripRating').value),
                description: document.getElementById('tripDescription').value,
                videoUrl: document.getElementById('tripVideo').value,
                category: document.getElementById('tripCategory').value,
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                createdBy: currentUser.email
            };
            
            document.getElementById('adminLoading').style.display = 'inline-block';
            document.getElementById('adminSubmitText').style.display = 'none';
            
            try {
                await db.collection('trips').add(tripData);
                document.getElementById('adminForm').reset();
                loadTripsFromFirestore();
                alert('Trip added successfully!');
            } catch (error) {
                alert('Error adding trip: ' + error.message);
            } finally {
                document.getElementById('adminLoading').style.display = 'none';
                document.getElementById('adminSubmitText').style.display = 'inline';
            }
        }

        async function loadTripsFromFirestore() {
            try {
                const snapshot = await db.collection('trips').orderBy('createdAt', 'desc').get();
                
                // Clear existing trips (except samples for demo)
                const containers = {
                    trending: document.getElementById('trendingTrips'),
                    upcoming: document.getElementById('upcomingTrips'),
                    past: document.getElementById('pastTrips')
                };
                
                // Only clear Firebase trips, keep sample trips
                snapshot.forEach(doc => {
                    const existingCard = document.querySelector(`[data-trip-id="${doc.id}"]`);
                    if (existingCard) existingCard.remove();
                });
                
                snapshot.forEach(doc => {
                    const trip = { id: doc.id, ...doc.data() };
                    const tripCard = createTripCard(trip);
                    tripCard.setAttribute('data-trip-id', doc.id);
                    
                    if (containers[trip.category]) {
                        containers[trip.category].appendChild(tripCard);
                    }
                });
            } catch (error) {
                console.error('Error loading trips:', error);
            }
        }

        async function deleteTrip(tripId) {
            if (!isAdmin || !confirm('Are you sure you want to delete this trip?')) return;
            
            try {
                await db.collection('trips').doc(tripId).delete();
                document.querySelector(`[data-trip-id="${tripId}"]`).remove();
                document.getElementById('tripModal').style.display = 'none';
                alert('Trip deleted successfully!');
            } catch (error) {
                alert('Error deleting trip: ' + error.message);
            }
        }

        function editTrip(tripId) {
            if (!isAdmin) return;
            
            // This would open an edit form - for now, just show an alert
            alert('Edit functionality would be implemented here. For now, please delete and recreate the trip.');
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>